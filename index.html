<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap');
            .container {
                width: 80%;
                margin: auto;
                display: block;
                font-family: 'Source Sans Pro', sans-serif;
            }
            canvas {
                margin: auto;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <canvas id="myChart1" width="1000" height="400"></canvas>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            async function sketch() {
                let result1 = null
                let result2 = null
                let result3 = null
                let data    = null

                result1 = await $.ajax({
                    url: "http://127.0.0.1:5501/result/gr17_d/TODAY/hillclimbing_17_1_.json",
                    method: "GET"
                })
                result2 = await $.ajax({
                    url: "http://127.0.0.1:5501/result/gr17_d/TODAY/hillclimbing_17_2_.json",
                    method: "GET"
                })
                result3 = await $.ajax({
                    url: "http://127.0.0.1:5501/result/gr17_d/TODAY/hillclimbing_17_3_.json",
                    method: "GET"
                })
                data = [...result1.history,...result2.history,...result3.history].map(item => item.resultPathLength)

                new Chart(document.getElementById("myChart1"), {
                    type: "bar",
                    data: {
                        labels: Array.from({length: data.length}).map((i, index) => index),
                        datasets: [
                            {
                                type: 'bar',
                                data: data,
                                borderWidth: 1,
                                label: "Giá trị thực nghiệm",
                                backgroundColor: 'blue',
                                order: 2
                            },
                            {
                                type: 'line',
                                data: [{x: 0, y: 2085}, {x: data.length - 1, y: 2085}],
                                order: 1,
                                label: "Giá trị tối ưu",
                                borderColor: "red"
                            }
                        ],
                    },
                    options: {
                        responsive: false,
                    },
                });
            }
            Chart.defaults.font.family = "Source Sans Pro";
            sketch()
        </script>
    </body>
</html>
